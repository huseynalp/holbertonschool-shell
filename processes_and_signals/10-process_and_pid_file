#!/usr/bin/env bash
# Script that manages PID file and handles signals

PID_FILE="/var/run/myscript.pid"

# Function to clean up and exit
cleanup() {
    sudo rm -f "$PID_FILE"
    exit 0
}

# Function to handle SIGTERM
term_handler() {
    echo "I hate the kill command"
    cleanup
}

# Function to handle SIGINT
int_handler() {
    echo "Y U no love me?!"
}

# Create PID file with current process ID
sudo bash -c "echo $ > $PID_FILE"

# Set up signal handlers
trap 'int_handler' SIGINT
trap 'term_handler' SIGTERM
trap 'cleanup' SIGQUIT

# Infinite loop
while true
do
    echo "To infinity and beyond"
    sleep 2
done
